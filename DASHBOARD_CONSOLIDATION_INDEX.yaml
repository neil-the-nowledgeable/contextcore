# Dashboard and Data Consolidation Index
# Generated: 2026-01-26
# Purpose: Systematic inventory of all dashboards and telemetry data across Grafana instances
#
# CONSOLIDATION STATUS:
#   - ContextCore grafana/provisioning/dashboards/ is the SOURCE OF TRUTH for dashboards
#   - k8s/observability/dashboards/ should mirror provisioning dashboards
#   - Deploy/observability/grafana/dashboards/ should mirror provisioning dashboards
#
# PASSWORD REFERENCE:
#   - ContextCore instance: admin / admin
#   - Deploy instance: admin / adminadminadmin

metadata:
  generated_at: "2026-01-26T10:30:00Z"
  generated_by: "claude-code"
  purpose: "Consolidate dashboards and data across all Grafana instances"
  time_range: "Last 3 days (2026-01-23 to 2026-01-26)"

# =============================================================================
# SOURCE OF TRUTH - ContextCore Provisioning Dashboards
# =============================================================================
source_of_truth:
  location: "/Users/neilyashinsky/Documents/dev/ContextCore/grafana/provisioning/dashboards"
  description: "Canonical dashboard definitions organized by expansion pack"

  dashboards:
    core:
      - file: "core/portfolio.json"
        uid: "contextcore-portfolio"
        title: "Project Portfolio Overview"
        description: "High-level view of all projects with health indicators"
        modified: "2026-01-25"
        size_bytes: 25343
        datasources: ["Loki", "mimir"]

      - file: "core/installation.json"
        uid: "contextcore-installation"
        title: "ContextCore Installation Status"
        description: "Self-monitoring dashboard for ContextCore installation verification"
        modified: "2026-01-25"
        size_bytes: 20122
        datasources: ["Prometheus/mimir"]

      - file: "core/project-progress.json"
        uid: "contextcore-progress"
        title: "Project Progress"
        description: "Task completion and milestone tracking"
        modified: "2026-01-25"
        size_bytes: 14633
        datasources: ["Tempo"]

      - file: "core/sprint-metrics.json"
        uid: "contextcore-sprint"
        title: "Sprint Metrics"
        description: "Velocity, burndown, and sprint health metrics"
        modified: "2026-01-25"
        size_bytes: 17940
        datasources: ["Tempo"]

      - file: "core/project-operations.json"
        uid: "contextcore-ops"
        title: "Project Operations"
        description: "Operational view of project execution"
        modified: "2026-01-25"
        size_bytes: 21573
        datasources: ["Tempo"]

      - file: "core/project-tasks.json"
        uid: "contextcore-tasks"
        title: "Project Tasks"
        description: "View project tasks as OpenTelemetry spans from Tempo"
        modified: "2026-01-26"
        size_bytes: 9527
        datasources: ["Tempo"]
        note: "Moved from rabbit/workflow.json - this is core functionality, not Rabbit"

    beaver:
      - file: "beaver/beaver-lead-contractor-progress.json"
        uid: "beaver-lead-contractor"
        title: "[BEAVER] Lead Contractor Progress"
        description: "Track project progress with StartD8 SDK Lead Contractor integration"
        modified: "2026-01-25"
        size_bytes: 20376
        datasources: ["Tempo", "mimir"]
        expansion_pack: "contextcore-beaver"

    # NOTE: There is no rabbit dashboard. Rabbit is a trigger mechanism, not a workflow manager.
    # The former "workflow.json" was moved to core/project-tasks.json as it displays
    # project tasks from Tempo—core ContextCore functionality, not Rabbit functionality.

    fox:
      - file: "fox/fox-alert-automation.json"
        uid: "fox-alert-automation"
        title: "Fox Alert Automation"
        description: "Alert automation pipeline monitoring"
        modified: "2026-01-25"
        size_bytes: 24941
        datasources: ["Tempo", "Loki", "mimir"]
        expansion_pack: "contextcore-fox"

    squirrel:
      - file: "squirrel/skills-browser.json"
        uid: "skills-browser"
        title: "Skills Browser"
        description: "Browse and search available skills"
        modified: "2026-01-25"
        size_bytes: 11125
        datasources: ["Tempo"]
        expansion_pack: "contextcore-squirrel"

      - file: "squirrel/value-capabilities.json"
        uid: "contextcore-value"
        title: "Value Capabilities Dashboard"
        description: "Explore value propositions and capabilities"
        modified: "2026-01-25"
        size_bytes: 6166
        datasources: ["Tempo"]
        expansion_pack: "contextcore-squirrel"

    external:
      - file: "external/agent-trigger.json"
        uid: "agent-trigger"
        title: "Agent Trigger"
        description: "External agent trigger dashboard"
        modified: "2026-01-25"
        size_bytes: 4899
        datasources: ["Loki"]

# =============================================================================
# K8s Observability Dashboards (should mirror source of truth)
# =============================================================================
k8s_dashboards:
  location: "/Users/neilyashinsky/Documents/dev/ContextCore/k8s/observability/dashboards"
  description: "Dashboards deployed to Kind cluster via ConfigMap"
  sync_status: "NEEDS_SYNC"

  files:
    - file: "portfolio.json"
      modified: "2026-01-22"
      size_bytes: 25364
      status: "OUTDATED"
      action: "Copy from source_of_truth/core/portfolio.json"

    - file: "installation.json"
      modified: "2026-01-22"
      size_bytes: 20839
      status: "OUTDATED"
      action: "Copy from source_of_truth/core/installation.json"

    - file: "project-progress.json"
      modified: "2026-01-22"
      size_bytes: 14390
      status: "OUTDATED"
      action: "Copy from source_of_truth/core/project-progress.json"

    - file: "sprint-metrics.json"
      modified: "2026-01-22"
      size_bytes: 17661
      status: "OUTDATED"
      action: "Copy from source_of_truth/core/sprint-metrics.json"

    - file: "project-operations.json"
      modified: "2026-01-22"
      size_bytes: 21339
      status: "OUTDATED"
      action: "Copy from source_of_truth/core/project-operations.json"

    - file: "value-capabilities.json"
      modified: "2026-01-22"
      size_bytes: 47765
      status: "OUTDATED"
      action: "Copy from source_of_truth/squirrel/value-capabilities.json"

    - file: "beaver-lead-contractor-progress.json"
      modified: "2026-01-25"
      size_bytes: 20376
      status: "CURRENT"
      action: "None"

    - file: "workflow.json"
      modified: "2026-01-25"
      size_bytes: 9527
      status: "OUTDATED"
      action: "Rename to project-tasks.json and update from source_of_truth/core/project-tasks.json"

  missing_from_k8s:
    - source: "source_of_truth/fox/fox-alert-automation.json"
      action: "Copy to k8s/observability/dashboards/"
    - source: "source_of_truth/squirrel/skills-browser.json"
      action: "Copy to k8s/observability/dashboards/"
    - source: "source_of_truth/external/agent-trigger.json"
      action: "Copy to k8s/observability/dashboards/"

# =============================================================================
# Deploy Observability Dashboards (should mirror source of truth)
# =============================================================================
deploy_dashboards:
  location: "/Users/neilyashinsky/Documents/Deploy/observability/grafana/dashboards/contextcore"
  description: "Dashboards in Deploy directory (uses password adminadminadmin)"
  sync_status: "NEEDS_SYNC"

  files:
    - file: "portfolio.json"
      modified: "2026-01-21"
      size_bytes: 25364
      status: "OUTDATED"

    - file: "installation.json"
      modified: "2026-01-21"
      size_bytes: 18397
      status: "OUTDATED"

    - file: "project-progress.json"
      modified: "2026-01-21"
      size_bytes: 14390
      status: "OUTDATED"

    - file: "sprint-metrics.json"
      modified: "2026-01-21"
      size_bytes: 17661
      status: "OUTDATED"

    - file: "project-operations.json"
      modified: "2026-01-21"
      size_bytes: 21339
      status: "OUTDATED"

    - file: "value-capabilities.json"
      modified: "2026-01-21"
      size_bytes: 47765
      status: "OUTDATED"

    - file: "beaver-lead-contractor-progress.json"
      modified: "2026-01-25"
      size_bytes: 20376
      status: "CURRENT"

    - file: "workflow.json"
      modified: "2026-01-25"
      size_bytes: 9527
      status: "OUTDATED"
      action: "Rename to project-tasks.json and update from source_of_truth/core/project-tasks.json"

  missing_from_deploy:
    - source: "source_of_truth/fox/fox-alert-automation.json"
    - source: "source_of_truth/squirrel/skills-browser.json"
    - source: "source_of_truth/external/agent-trigger.json"

# =============================================================================
# Owl Plugin Development Dashboards
# =============================================================================
owl_plugin_dashboards:
  location: "/Users/neilyashinsky/Documents/dev/ContextCore/contextcore-owl/plugins-new"
  description: "Development dashboards for Grafana plugin testing"

  files:
    - file: "contextcore-chat-panel/provisioning/dashboards/dashboard.json"
      description: "Test dashboard for chat panel plugin"
      purpose: "Plugin development/testing only"

    - file: "contextcore-workflow-panel/provisioning/dashboards/dashboard.json"
      description: "Test dashboard for workflow panel plugin"
      purpose: "Plugin development/testing only"

# =============================================================================
# Task Data Files (for Tempo ingestion)
# =============================================================================
task_data:
  description: "Task JSON files that can be loaded into Tempo for dashboard data"

  ready_for_tempo:
    - file: "/Users/neilyashinsky/Documents/dev/ContextCore/plans/beaver-lead-contractor-tasks.json"
      project_id: "beaver-lead-contractor"
      task_count: 11
      description: "BLC integration tasks - Lead Contractor SDK workflow"
      loaded_to_tempo: true
      loaded_at: "2026-01-26"

    - file: "/Users/neilyashinsky/Documents/dev/ContextCore/plans/dashboard-persistence-tasks.json"
      project_id: "dashboard-persistence"
      task_count: 52
      description: "Dashboard organization and data persistence architecture tasks"
      loaded_to_tempo: true
      loaded_at: "2026-01-26"

  semantic_convention_tasks:
    location: "/Users/neilyashinsky/Documents/dev/ContextCore/semantic-convention-fixes"
    description: "Individual task result files from semantic convention refactoring"
    files:
      - "task-1-namespace-refactoring.json"
      - "task-2-fix-array-attribute-types.json"
      - "task-3-define-metrics-in-yaml-registry.json"
      - "task-4-align-agent-attributes-with-genai-conventions.json"
      - "task-5-resource-attribute-restructuring.json"
      - "task-6-event-standardization.json"
      - "task-7-crd-field-conversion.json"
      - "task-8-create-semantic-convention-registry-files.json"
    action: "Convert to spans format and load to Tempo if needed"

# =============================================================================
# Dashboard ↔ Data File Mapping
# =============================================================================
# Explicit mapping of which dashboards use which data files.
# This enables verification that dashboards have data and helps with troubleshooting.
dashboard_data_mapping:
  tempo_dashboards:
    # Dashboards that query Tempo for task/span data
    - dashboard: "beaver/beaver-lead-contractor-progress.json"
      uid: "beaver-lead-contractor"
      data_files:
        - file: "plans/beaver-lead-contractor-tasks.json"
          project_id: "beaver-lead-contractor"
          description: "BLC integration tasks loaded as spans"
      attributes_used:
        - "task.id"
        - "task.title"
        - "task.status"
        - "task.type"
        - "project.id"

    - dashboard: "core/project-tasks.json"
      uid: "contextcore-tasks"
      data_files:
        - file: "plans/beaver-lead-contractor-tasks.json"
          project_id: "beaver-lead-contractor"
        - file: "plans/dashboard-persistence-tasks.json"
          project_id: "dashboard-persistence"
      attributes_used:
        - "task.id"
        - "task.title"
        - "task.status"
        - "task.type"
        - "project.id"
      note: "Displays all tasks across projects via Tempo TraceQL queries"

    - dashboard: "core/project-progress.json"
      uid: "contextcore-progress"
      data_files:
        - file: "plans/beaver-lead-contractor-tasks.json"
          project_id: "beaver-lead-contractor"
        - file: "plans/dashboard-persistence-tasks.json"
          project_id: "dashboard-persistence"
      attributes_used:
        - "task.status"
        - "project.id"
        - "sprint.id"

    - dashboard: "core/sprint-metrics.json"
      uid: "contextcore-sprint"
      data_files:
        - file: "plans/beaver-lead-contractor-tasks.json"
          project_id: "beaver-lead-contractor"
        - file: "plans/dashboard-persistence-tasks.json"
          project_id: "dashboard-persistence"
      attributes_used:
        - "task.status"
        - "sprint.id"
        - "task.story_points"

    - dashboard: "core/project-operations.json"
      uid: "contextcore-ops"
      data_files:
        - file: "plans/beaver-lead-contractor-tasks.json"
          project_id: "beaver-lead-contractor"
        - file: "plans/dashboard-persistence-tasks.json"
          project_id: "dashboard-persistence"
      attributes_used:
        - "task.id"
        - "task.status"
        - "project.id"

    - dashboard: "squirrel/value-capabilities.json"
      uid: "contextcore-value"
      data_files: []
      note: "Queries Tempo for agent insights (agent.insight.type=capability)"
      attributes_used:
        - "agent.insight.type"
        - "agent.insight.summary"

    - dashboard: "squirrel/skills-browser.json"
      uid: "skills-browser"
      data_files: []
      note: "Queries Tempo for skill execution spans"
      attributes_used:
        - "skill.name"
        - "skill.version"

    - dashboard: "fox/fox-alert-automation.json"
      uid: "fox-alert-automation"
      data_files: []
      note: "Queries Tempo for alert pipeline spans and Loki for alert logs"
      attributes_used:
        - "alert.name"
        - "alert.severity"
        - "automation.action"

  loki_dashboards:
    # Dashboards that primarily query Loki for log data
    - dashboard: "core/portfolio.json"
      uid: "contextcore-portfolio"
      data_files:
        - file: "test_demo_output/demo_logs.json"
          description: "Demo structured logs"
      attributes_used:
        - "project.id"
        - "task.status"
      note: "Also queries Mimir for derived metrics from Loki recording rules"

    - dashboard: "external/agent-trigger.json"
      uid: "agent-trigger"
      data_files: []
      note: "Queries Loki for agent trigger events"
      attributes_used:
        - "trigger.source"
        - "trigger.action"

  metrics_dashboards:
    # Dashboards that primarily query Mimir/Prometheus
    - dashboard: "core/installation.json"
      uid: "contextcore-installation"
      data_files: []
      note: "Queries contextcore_install_* metrics emitted by install verify command"
      metrics_used:
        - "contextcore_install_completeness_percent"
        - "contextcore_install_requirement_status_ratio"
        - "contextcore_install_verification_duration_milliseconds"

# =============================================================================
# Demo/Export Data
# =============================================================================
demo_data:
  description: "Generated demo data for testing"

  files:
    - file: "/Users/neilyashinsky/Documents/dev/ContextCore/test_demo_output/demo_spans.json"
      description: "Demo span data for Tempo"
      format: "OTel spans JSON"

    - file: "/Users/neilyashinsky/Documents/dev/ContextCore/test_demo_output/demo_logs.json"
      description: "Demo log data for Loki"
      format: "Structured logs JSON"

# =============================================================================
# Backup Directories
# =============================================================================
backups:
  contextcore_backups:
    location: "/Users/neilyashinsky/Documents/dev/ContextCore/backups"
    entries:
      - dir: "20260117-184139"
        date: "2026-01-17"
      - dir: "20260122-115817"
        date: "2026-01-22"
      - dir: "20260122-120047"
        date: "2026-01-22"
      - dir: "20260122-120102"
        date: "2026-01-22"
        contents:
          - "datasources/datasources.json"
          - "manifest.json"

  deploy_backups:
    location: "/Users/neilyashinsky/Documents/Deploy/backups"
    description: "Timestamped backups from Deploy stack"
    entries:
      - "20260118-210329"
      - "20260122-120315"
      - "20260122-120332"
      - "20260122-145150"
      - "20260122-151008"
      - "20260122-151456"
      - "20260122-152708"
      - "20260122-153139"
      - "contextcore-20260122-115125"

# =============================================================================
# Docker Volumes (Persistent Data)
# =============================================================================
docker_volumes:
  description: "Docker volumes that may contain Grafana data"
  volumes:
    - name: "docker_grafana-data"
      purpose: "Root docker-compose Grafana data"
    - name: "grafana_grafana-data"
      purpose: "Grafana stack data"
    - name: "grafana_loki-data"
      purpose: "Loki log storage"
    - name: "grafana_mimir-data"
      purpose: "Mimir metrics storage"
    - name: "grafana_tempo-data"
      purpose: "Tempo trace storage"
    - name: "grafana_pyroscope-data"
      purpose: "Pyroscope profiling data"

# =============================================================================
# Generated Code Results (Dashboard-related)
# =============================================================================
generated_results:
  location: "/Users/neilyashinsky/Documents/dev/ContextCore/generated/phase3"
  description: "Lead Contractor generated code results"

  dashboard_persistence:
    - "dashboard_persistence/phase1/dashpersist_folderstructure_result.json"
    - "dashboard_persistence/phase2/dashpersist_grafanaconfig_result.json"
    - "dashboard_persistence/phase3/dashpersist_discoverymodule_result.json"
    - "dashboard_persistence/phase4/dashpersist_provisionerupdate_result.json"
    - "dashboard_persistence/phase5/dashpersist_clienhancements_result.json"
    - "dashboard_persistence/phase6/dashpersist_persistencedetector_result.json"

  prime_contractor:
    - "prime_contractor/dp_phase1_folder_structure/dashboard_folder_structure_result.json"

# =============================================================================
# CONSOLIDATION ACTIONS
# =============================================================================
consolidation_actions:
  priority_1_sync_k8s:
    description: "Sync k8s/observability/dashboards with source of truth"
    commands:
      - "cp grafana/provisioning/dashboards/core/*.json k8s/observability/dashboards/"
      - "cp grafana/provisioning/dashboards/fox/*.json k8s/observability/dashboards/"
      - "cp grafana/provisioning/dashboards/squirrel/skills-browser.json k8s/observability/dashboards/"
      - "cp grafana/provisioning/dashboards/external/*.json k8s/observability/dashboards/"
      - "kubectl apply -k k8s/observability/"
      - "kubectl rollout restart deployment/grafana -n observability"

  priority_2_sync_deploy:
    description: "Sync Deploy/observability dashboards with source of truth"
    commands:
      - "cp grafana/provisioning/dashboards/core/*.json ../Deploy/observability/grafana/dashboards/contextcore/"
      - "cp grafana/provisioning/dashboards/fox/*.json ../Deploy/observability/grafana/dashboards/contextcore/"
      - "cp grafana/provisioning/dashboards/squirrel/*.json ../Deploy/observability/grafana/dashboards/contextcore/"
      - "cp grafana/provisioning/dashboards/external/*.json ../Deploy/observability/grafana/dashboards/contextcore/"

  priority_3_load_remaining_tasks:
    description: "Load remaining task files to Tempo"
    commands:
      - "python3 scripts/load_tasks_to_tempo.py semantic-convention-fixes/task-*.json"

  priority_4_update_kustomization:
    description: "Update kustomization.yaml to include all dashboards"
    file: "k8s/observability/kustomization.yaml"
    add_files:
      - "dashboards/fox-alert-automation.json"
      - "dashboards/skills-browser.json"
      - "dashboards/agent-trigger.json"

# =============================================================================
# VERIFICATION CHECKLIST
# =============================================================================
verification_checklist:
  - task: "All source_of_truth dashboards have valid JSON"
    command: "for f in grafana/provisioning/dashboards/*/*.json; do jq empty $f && echo OK: $f; done"

  - task: "K8s dashboards match source of truth"
    command: "diff -q grafana/provisioning/dashboards/core/ k8s/observability/dashboards/ 2>/dev/null || echo 'Differences found'"

  - task: "Grafana can load all dashboards"
    command: "curl -s -u admin:adminadminadmin 'http://localhost:3000/api/search' | jq length"

  - task: "Tempo has task data"
    command: "curl -s 'http://localhost:3200/api/search?limit=10' | jq '.traces | length'"
